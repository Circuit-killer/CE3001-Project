module control(OpCode,Cond, Flag, ALUOp, WriteEn, MemEnab, MemWrite, Signal);

  //declare input and output signal
  input [3:0] OpCode;
  input [2:0] Cond;
  input [2:0] Flag;
  
  
  output MemEnab, MemWrite, WriteEn;
  output reg [2:0] ALUOp;
  output reg [10:0] Signal;
  
  wire N,V,Z;
  wire BS;// branch successful or not
  
  

  
  always @(OpCode or Cond or Flag)
  begin
    
    N = Flag[2];
    V = Flag[1];
    Z = Flag[0];
    
     
   case (OpCode)
     
      // ADD
      4'b0000: Signal   = 10'b00000110110;
               ALUOp    = 3'b000;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //SUB
      4'b0001: Signal   = 10'b00000110110;
               ALUOp    = 3'b001;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //AND         
      4'b0010: Signal   = 10'b00000110110;
               ALUOp    = 3'b010;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //OR        
      4'b0011: Signal   = 10'b00000110110;
               ALUOp    = 3'b011;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //SLL         
      4'b0100: Signal   = 10'b00000010110;
               ALUOp    = 3'b100;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //SRL        
      4'b0101: Signal   = 10'b00000010110;
               ALUOp    = 3'b101;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //SRA         
      4'b0110: Signal   = 10'b00000010110;
               ALUOp    = 3'b110;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //RL
      4'b0111: Signal   = 10'b00000010110;
               ALUOp    = 3'b111;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b1;
               
      //LW         
      4'b1000: Signal   = 10'b00010010110;
               WriteEn  = 1'b1;
               MemEnab  = 1'b1;
               MemWrite = 1'b0;
               
      //SW         
      4'b1001: Signal   = 10'b00010010110;
               WriteEn  = 1'b0;
               MemEnab  = 1'b1;
               MemWrite = 1'b1;
               
      //LHB        
      4'b1010: Signal   = 10'b10100000000;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b0;
               
      //LLB         
      4'b1011: Signal   = 10'b00000000000;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b0;
               
      //B  
      //N = Flag[2];
      //V = Flag[1];
      //Z = Flag[0];       
      4'b1100: case(Cond)
      
                 3'b000:  if ( Z == 1)
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                         
                 3'b001:  if (Z == 0)
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                 3'b010:  if (Z == 0 && N == 0)
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                 3'b011:  if (N == 1)
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                 3'b100:  if (Z==1||(Z == 0 && N == 0))
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                 3'b101:  if (Z==1||N == 1)
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                 3'b110:  if (V == 1)
                          begin
                            Signal   = 10'b00000110001;
                            WriteEn  = 1'b0;
                            MemEnab  = 1'b0;
                            MemWrite = 1'b0;
                          end else begin
                            default
                          end
                 3'b111:  Signal   = 10'b00000110001;
                          WriteEn  = 1'b0;
                          MemEnab  = 1'b0;
                          MemWrite = 1'b0;
                 default: Signal   = 10'b00000110000;
                          WriteEn  = 1'b0;
                          MemEnab  = 1'b0;
                          MemWrite = 1'b0;
               
               endcase 
      //JAL         
      4'b1101: Signal   = 10'b00101111101;
               WriteEn  = 1'b1; 
               MemEnab  = 1'b0;
               MemWrite = 1'b0;
               
      //JR         
      4'b1110: Signal   = 10'b00101111111;
               WriteEn  = 1'b0; 
               MemEnab  = 1'b0;
               MemWrite = 1'b0;
               
      //EXEC : EXEC(Next)to be completed      
      4'b1111: Signal   = 10'b00100110111;
               WriteEn  = 1'b1;
               MemEnab  = 1'b0;
               MemWrite = 1'b0;
                   

   endcase
   
   if (B) begin
      BS
    end else 
      BN
    end
   
   
  end
  
endmodule
 